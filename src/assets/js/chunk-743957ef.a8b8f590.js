(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-743957ef"],{"116e":function(t,e,n){t.exports={checkbox:"search_checkbox_3BOV5"}},"2c60":function(t,e,n){"use strict";var a=n("116e"),i=n.n(a);e["default"]=i.a},ae60:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container-complex-table"},[n("x-search"),n("x-table"),n("x-pagination")],1)},i=[],r=n("cebc"),s=n("2f62"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form.fields,rules:t.form.rules}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"请输入查询内容","prefix-icon":"el-icon-search",autocomplete:"on",maxlength:"20"},model:{value:t.form.fields.q,callback:function(e){t.$set(t.form.fields,"q",e)},expression:"form.fields.q"}})],1),n("el-form-item",[n("el-select",{staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"所有学历"},model:{value:t.form.fields.education,callback:function(e){t.$set(t.form.fields,"education",e)},expression:"form.fields.education"}},t._l(t.edus,function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("查询")])],1)],1),n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.handleRefresh}},[t._v("刷新")]),n("el-button",{attrs:{type:"primary",icon:"button-fix-icon fas fa-file-export fa-sm"},on:{click:t.handleDownload}},[t._v("导出")])],1)],1)},o=[],c=n("75fc"),u=(n("96cf"),n("3b8d")),f=n("4d5a"),d=n("0e9a"),h=Object(s["a"])("lazyTable"),m=h.mapState,p=h.mapMutations,b={data:function(){return{edus:["专科","本科","硕士研究生","博士研究生","其他"],form:{fields:{q:"",education:""},rules:{}}}},computed:Object(r["a"])({},m(["list","filters","infiniteState","isLoadMore"])),watch:{isLoadMore:function(t){t&&this.loadList()}},mounted:function(){},methods:Object(r["a"])({},p(["setState","clearList"]),{handleSearch:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.checkParams();case 2:if(!t.sent){t.next=5;break}this.setState({list:[]}),this.infiniteState.reset();case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleRefresh:function(){this.clearList(),this.infiniteState.reset()},checkParams:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.form.validate();case 2:return e=t.sent,e&&this.setState({filters:Object(r["a"])({},this.form.fields,{p:1})}),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),loadList:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,n,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].list(this.filters);case 2:e=t.sent,e&&(n=Object(c["a"])(this.list),e.list.length>0&&(n=[].concat(Object(c["a"])(this.list),Object(c["a"])(e.list)),this.setState({filters:{p:+this.filters.p+1}})),this.setState({list:n,total:e.total,isLoadMore:!1}),this.$nextTick(function(){e.list.length>0?a.infiniteState.loaded():a.infiniteState.complete()}));case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleCreate:function(){this.setState({activeIndex:-1,editVisible:!0})},handleDownload:function(){d["a"].export2excel({data:this.list,headerProp:["name","income","education","status","remark"],headerName:["姓名","收入","学历","状态","备注"],name:"导出.xlsx"})}})},v=b,w=n("2c60"),g=n("2877");function S(t){this["$style"]=w["default"].locals||w["default"]}var x=Object(g["a"])(v,l,o,!1,S,null,null),y=x.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",{ref:"table",staticClass:"table",attrs:{height:"500",border:"",stripe:"",data:t.list},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.name))]),n("i",{staticClass:"fas fa-lg fa-fw",class:t._f("genderFilter")(e.row.gender)})]}}])}),n("el-table-column",{attrs:{prop:"income",label:"收入",width:"150",align:"right",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t._f("currency")(e.row.income,"￥",2))+"\n        ")]}}])}),n("el-table-column",{attrs:{prop:"education",label:"学历",width:"150",align:"center"}}),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),n("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":"","min-width":"300"}}),n("el-table-column",{attrs:{label:"操作",width:"64"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}})]}}])}),n("infinite-loading",{attrs:{slot:"append","force-use-infinite-wrapper":".el-table__body-wrapper"},on:{infinite:t.infiniteHandler},slot:"append"})],1)},_=[],O=(n("7514"),n("dbcd")),j=n.n(O),R=Object(s["a"])("lazyTable"),$=R.mapState,T=R.mapMutations,C={filters:{statusFilter:function(t){var e=[{key:"在职",value:"info"},{key:"待业",value:"danger"},{key:"退休",value:""},{key:"创业",value:"success"},{key:"游学",value:"warning"}],n=e.find(function(e){return e.key===t});return n?n.value:""},genderFilter:function(t){return"男"===t?["fa-male",j.a["c-male"]]:["fa-female",j.a["c-female"]]}},data:function(){return{style:j.a}},computed:Object(r["a"])({},$(["list","colums"])),mounted:function(){this.setState({components:{table:this.$refs.table}})},methods:Object(r["a"])({},T(["setState","listRemove"]),{infiniteHandler:function(t){this.setState({infiniteState:t,isLoadMore:!0})},handleDelete:function(t,e){var n=this;this.$confirm("确认要删除这条数据吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.remove(t,e)}).catch(function(){})},remove:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e,n){var a,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.setState({activeIndex:e,loading:!0}),t.next=3,f["a"].remove({guid:n.guid});case 3:a=t.sent,a&&this.listRemove({multipleSelection:[n]}),this.$nextTick(function(){return i.setState({loading:!1})});case 6:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}(),handleSelectionChange:function(t){this.setState({multipleSelection:t})}})},L=C,M=Object(g["a"])(L,k,_,!1,null,null,null),B=M.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination flex-row-center"},[n("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:t.handleClick,command:t.handleCommand}},[n("i",{staticClass:"el-icon-delete"}),t._v(" 删除选中\n        "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"a"}},[t._v("转为退休")]),n("el-dropdown-item",{attrs:{command:"b"}},[t._v("转为创业")])],1)],1)],1)},z=[],G=Object(s["a"])("lazyTable"),D=G.mapState,E=G.mapMutations,F=G.mapGetters,P={computed:Object(r["a"])({},D(["components","multipleSelection"]),F(["multipleSelectionGuid"])),methods:Object(r["a"])({},E(["setState","listRemove","listUpdateStatus"]),{handleClick:function(){var t=this;this.multipleSelectionGuid&&this.$confirm("确认要删除这些数据吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.batchRemove()}).catch(function(){})},batchRemove:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.next=3,f["a"].remove({guid:this.multipleSelectionGuid});case 3:e=t.sent,e&&this.listRemove({multipleSelection:this.multipleSelection}),this.$nextTick(function(){return n.setState({loading:!1})});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleCommand:function(t){var e=this,n={a:function(){e.changeStatus("退休")},b:function(){e.changeStatus("创业")}};this.multipleSelectionGuid&&this.$confirm("确认要批量修改这些数据吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n[t]()}).catch(function(){})},changeStatus:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var n,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.next=3,f["a"].updateStatus({status:e});case 3:n=t.sent,n&&this.listUpdateStatus({status:e}),this.components.table.clearSelection(),this.$nextTick(function(){return a.setState({loading:!1})});case 7:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()})},U=P,X=Object(g["a"])(U,q,z,!1,null,null,null),H=X.exports,I=Object(s["a"])("lazyTable"),J=I.mapState,N=I.mapMutations,V={components:{XSearch:y,XTable:B,XPagination:H},computed:Object(r["a"])({},J(["loading"])),mounted:function(){},beforeRouteUpdate:function(t,e,n){this.setState({filters:t.query}),n()},methods:Object(r["a"])({},N(["setState"]))},A=V,K=Object(g["a"])(A,a,i,!1,null,null,null);e["default"]=K.exports}}]);