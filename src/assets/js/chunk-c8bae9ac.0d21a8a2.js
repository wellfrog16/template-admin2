(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8bae9ac"],{"09f9":function(t,e,i){t.exports={dialog:"uploadImage_dialog_2r-5c"}},"3ad0":function(t,e,i){},"6a26":function(t,e,i){"use strict";var n=i("7bef"),a=i.n(n);e["default"]=a.a},"7bef":function(t,e,i){t.exports={main:"Editor_main_3NOwI"}},8296:function(t,e,i){"use strict";var n=i("3ad0"),a=i.n(n);a.a},8312:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main-wrapper",class:t.$style.main},[i("el-card",{attrs:{shadow:"never"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"Mini配置",name:"tab1"}},[i("tinymce",{attrs:{height:300},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),i("el-tab-pane",{attrs:{label:"简单配置",name:"tab2"}},[i("tinymce",{attrs:{height:300,config:"simple"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),i("el-tab-pane",{attrs:{label:"标准配置",name:"tab3"}},[i("tinymce",{attrs:{height:300,config:"standard"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),i("el-tab-pane",{attrs:{label:"全部",name:"tab4"}},[i("tinymce",{attrs:{height:300,config:"full"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1)],1),i("el-card",{attrs:{shadow:"never"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",[t._v("对话框调用")])]),i("div",[i("el-button",{on:{click:t.create}},[t._v("新建")]),i("el-button",{attrs:{type:"primary"},on:{click:t.edit}},[t._v("修改")])],1)]),i("el-dialog",{staticClass:"or-dialog-wrapper",attrs:{title:"编辑",visible:t.dialogVisible,"close-on-click-modal":!1,"custom-class":"or-dialog",width:"800px",top:"0"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("tinymce",{ref:"tinymce",attrs:{height:300,config:"simple"},model:{value:t.myContent,callback:function(e){t.myContent=e},expression:"myContent"}}),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},a=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:t.fullscreen}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),i("uploadImage",{attrs:{visible:t.uploadImageVisible},on:{"update:visible":function(e){t.uploadImageVisible=e},"on-success":t.imageUploadSuccess}})],1)},s=[],l=(i("8e6e"),i("456d"),i("ac6a"),i("bd86")),c=(i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"or-dialog-wrapper",attrs:{title:"上传图片",visible:t.visible,"before-close":t.handleClose,"close-on-click-modal":!1,"append-to-body":!0,"custom-class":"or-dialog "+t.$style.dialog,top:"0"},on:{"update:visible":function(e){t.visible=e}}},[i("el-upload",{attrs:{name:t.name,multiple:!1,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"on-error":t.handleError,"before-upload":t.beforeUpload,accept:".jpg,.jpeg,.png",action:t.action,"list-type":"picture-card"}},[i("el-button",{attrs:{type:"primary"}},[t._v("点击上传")])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:t.uploading},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)}),r=[],u=i("f121"),d={props:{name:{type:String,default:"avatar"},visible:{type:Boolean,default:!1}},data:function(){return{fileList:[],imgList:{},uploading:!1,count:0}},computed:{allReady:function(){var t=this;return!Object.keys(this.imgList).every(function(e){return t.imgList[e].isSuccess})},action:function(){return u["a"].server.upload||"https://httpbin.org/post"}},watch:{count:function(){this.uploading=!this.checkAllSuccess()}},methods:{handleClose:function(){this.$emit("update:visible",!1)},checkAllSuccess:function(){var t=this;return Object.keys(this.imgList).every(function(e){return t.imgList[e].isSuccess})},handleSubmit:function(){var t=this,e=Object.keys(this.imgList).map(function(e){return t.imgList[e]});this.$emit("on-success",e),this.imgList={},this.fileList=[],this.count=0,this.handleClose()},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,n=t.uid,a=t.size,o=t.type;return this.imgList[n]={},this.uploading=!0,new Promise(function(s){var l=new Image;l.src=i.createObjectURL(t),l.onload=function(){e.imgList[n]={isSuccess:!1,uid:n,size:a,type:o,width:this.width,height:this.height}},s(!0)})},handleSuccess:function(t,e){var i=this;Object.keys(this.imgList).forEach(function(n){var a=i.imgList[n];a.uid===e.uid&&(a.url=t.files&&t.files.file||"".concat(u["a"].server.image,"/").concat(t.data.file),a.isSuccess=!0,i.count+=1)})},handleError:function(t,e){var i=this;setTimeout(function(){Object.keys(i.imgList).forEach(function(t){i.imgList[t].uid===e.uid&&delete i.imgList[t]}),i.uploading=!1},1e3)},handleRemove:function(t){var e=this;Object.keys(this.imgList).forEach(function(i){e.imgList[i].uid===t.uid&&delete e.imgList[i],e.count-=1})}}},m=d,f=i("b1e7"),g=i("2877");function h(t){this["$style"]=f["default"].locals||f["default"]}var p=Object(g["a"])(m,c,r,!1,h,null,null),b=p.exports,y={toolbar:"bold | alignleft aligncenter alignright alignjustify | bullist numlist | forecolor",menubar:!1,plugins:"lists"},v={toolbar:"undo redo | formatselect | bold | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent | forecolor backcolor | removeformat | link image | uploadImage | preview",menubar:!1,plugins:"lists link image preview imagetools"},w={toolbar:"formatselect | bold | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent | forecolor backcolor | removeformat | link image | preview",menubar:!0,plugins:"lists link image preview table imagetools"},k={toolbar:"formatselect | code | bold italic strikethrough forecolor backcolor permanentpen formatpainter | link image media pageembed | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent | removeformat | addcomment",menubar:!0,plugins:"code print preview fullpage searchreplace autolink directionality visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists wordcount imagetools textpattern help",image_advtab:!0,image_caption:!0},_={mini:y,simple:v,standard:w,full:k};function C(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function j(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?C(i,!0).forEach(function(e){Object(l["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):C(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var O={name:"Tinymce",components:{uploadImage:b},props:{id:{type:String,default:function(){return"vue-tinymce-".concat(+new Date).concat((1e3*Math.random()).toFixed(0))}},value:{type:String,default:""},config:{type:String,default:"mini"},height:{type:Number,required:!1,default:360}},data:function(){return{uploadImageVisible:!1,hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList.zh}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init(j({},_[this.config],{language:this.language,selector:"#".concat(this.tinymceId),height:this.height,width:"100%",object_resizing:"img",end_container_on_empty_block:!0,powerpaste_word_import:"clean",advlist_bullet_styles:"square",advlist_number_styles:"default",default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})},setup:function(t){t.ui.registry.addButton("uploadImage",{text:"上传图片",onAction:function(){e.uploadImageVisible=!0}})}}))},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageUploadSuccess:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img src="'.concat(t.url,'" >'))})}}},L=O,x=(i("8296"),Object(g["a"])(L,o,s,!1,null,"a339f61a",null)),I=x.exports,S={components:{Tinymce:I},data:function(){return{activeName:"tab2",content:"",myContent:"",dialogVisible:!1}},methods:{create:function(){var t=this;this.dialogVisible=!0,this.$nextTick(function(){t.$refs.tinymce.setContent("")})},edit:function(){var t=this;this.dialogVisible=!0,this.$nextTick(function(){t.$refs.tinymce.setContent("修改信息")})}}},T=S,$=i("6a26");function E(t){this["$style"]=$["default"].locals||$["default"]}var V=Object(g["a"])(T,n,a,!1,E,null,null);e["default"]=V.exports},b1e7:function(t,e,i){"use strict";var n=i("09f9"),a=i.n(n);e["default"]=a.a}}]);