(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf826570"],{"0436":function(t,e,n){"use strict";var a=n("7497"),i=n.n(a);e["default"]=i.a},"26f7":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container-complex-table"},[n("x-search"),n("x-table"),n("x-pagination"),n("x-preview"),n("x-edit")],1)},i=[],r=n("cebc"),l=n("2f62"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form.fields,rules:t.form.rules}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"请输入查询内容","prefix-icon":"el-icon-search",autocomplete:"on",maxlength:"20"},model:{value:t.form.fields.q,callback:function(e){t.$set(t.form.fields,"q",e)},expression:"form.fields.q"}})],1),n("el-form-item",[n("el-select",{staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"所有学历"},model:{value:t.form.fields.education,callback:function(e){t.$set(t.form.fields,"education",e)},expression:"form.fields.education"}},t._l(t.edus,function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("查询")])],1),n("el-form-item",[n("el-checkbox-group",{class:t.$style.checkbox,model:{value:t.colums,callback:function(e){t.colums=e},expression:"colums"}},[n("el-checkbox",{attrs:{label:"income"}},[t._v("收入")]),n("el-checkbox",{attrs:{label:"id"}},[t._v("身份证")])],1)],1)],1),n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("新增")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.handleRefresh}},[t._v("刷新")]),n("el-button",{attrs:{type:"primary",icon:"button-fix-icon fas fa-file-export fa-sm"},on:{click:t.handleDownload}},[t._v("导出")])],1)],1)},s=[],c=(n("96cf"),n("3b8d")),u=n("4d5a"),d=n("2c38"),h=n("5ac0"),f=n("0e9a"),m=Object(l["a"])("complexTable"),p=m.mapState,b=m.mapMutations,v=m.mapGetters,x={data:function(){return{edus:["专科","本科","硕士研究生","博士研究生","其他"],colums:["income","id"],form:{fields:{q:"",education:""},rules:{}}}},computed:Object(r["a"])({},p(["list","filters"]),v(["queryPath"]),{query:function(t){return t.$route.query}}),watch:{query:{handler:function(t){this.setFilters(t),h["c"].mergeParam(this.form.fields,t),this.loadList()},deep:!0},colums:function(t){this.setState({colums:t})}},mounted:function(){var t=this.$route.query;d["h"].isEmpty(t)?(this.setFilters({}),this.loadList()):(this.setFilters(t),delete t.p,delete t.ps,h["c"].mergeParam(this.form.fields,t),this.loadList())},methods:Object(r["a"])({},b(["setState","setFilters"]),{handleSearch:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.checkParams();case 2:if(!t.sent){t.next=4;break}this.$router.push(this.queryPath);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleRefresh:function(){this.loadList()},checkParams:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.form.validate();case 2:return e=t.sent,e&&this.setState({filters:Object(r["a"])({},this.form.fields,{p:1})}),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),loadList:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.next=3,u["a"].list(this.filters);case 3:e=t.sent,e&&this.setState({list:e.list,total:e.total}),this.$nextTick(function(){return n.setState({loading:!1})});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleCreate:function(){this.setState({activeIndex:-1,editVisible:!0})},handleDownload:function(){f["a"].export2excel({data:this.list,headerProp:["id","name","gender","birthday","county","education","status","email","zip","income","remark"],headerName:["身份证","姓名","性别","出生年月","城市","学历","状态","电子邮件","邮编","收入","备注"],name:"导出.xlsx"})}})},w=x,g=n("0436"),y=n("2877");function S(t){this["$style"]=g["default"].locals||g["default"]}var k=Object(y["a"])(w,o,s,!1,S,null,null),_=k.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",{ref:"table",staticClass:"table",attrs:{height:"500",border:"",stripe:"",data:t.list},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),n("el-table-column",{attrs:{fixed:"",prop:"name",label:"姓名",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.name))]),n("i",{staticClass:"fas fa-lg fa-fw",class:t._f("genderFilter")(e.row.gender)})]}}])}),n("el-table-column",{attrs:{prop:"birthday",label:"出生日期",width:"140",align:"center",sortable:""}}),t.colums.includes("income")?n("el-table-column",{attrs:{prop:"income",label:"收入",width:"150",align:"right",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t._f("currency")(e.row.income,"￥",2))+"\n        ")]}}],null,!1,1631522679)}):t._e(),n("el-table-column",{attrs:{prop:"education",label:"学历",width:"150",align:"center"}}),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"80",align:"center","filter-placement":"bottom-end",filters:t.statusData,"filter-method":t.filterStatus},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),t.colums.includes("id")?n("el-table-column",{attrs:{prop:"id",label:"身份证",width:"200",align:"center"}}):t._e(),n("el-table-column",{attrs:{prop:"county",label:"区域","show-overflow-tooltip":"",width:"200"}}),n("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":"",width:"250"}}),n("el-table-column",{attrs:{prop:"zip",label:"邮编",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":"",width:"500"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"175"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-view"},on:{click:function(n){return t.handlePreview(e.$index)}}}),n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.handleEdit(e.$index)}}}),n("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}})]}}])})],1)},j=[],O=(n("7514"),n("dbcd")),R=n.n(O),C=Object(l["a"])("complexTable"),q=C.mapState,T=C.mapMutations,P={filters:{statusFilter:function(t){var e=[{key:"在职",value:"info"},{key:"待业",value:"danger"},{key:"退休",value:""},{key:"创业",value:"success"},{key:"游学",value:"warning"}],n=e.find(function(e){return e.key===t});return n?n.value:""},genderFilter:function(t){return"男"===t?["fa-male",R.a["c-male"]]:["fa-female",R.a["c-female"]]}},data:function(){return{style:R.a,statusData:[{text:"在职",value:"在职"},{text:"待业",value:"待业"},{text:"退休",value:"退休"},{text:"创业",value:"创业"},{text:"游学",value:"游学"}]}},computed:Object(r["a"])({},q(["list","colums"])),mounted:function(){this.setState({components:{table:this.$refs.table}})},methods:Object(r["a"])({},T(["setState","listRemove"]),{handlePreview:function(t){this.setState({activeIndex:t,previewVisible:!0})},handleEdit:function(t){this.setState({activeIndex:t,editVisible:!0})},handleDelete:function(t,e){var n=this;this.$confirm("确认要删除这条数据吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.remove(t,e)}).catch(function(){})},remove:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,n){var a,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.setState({activeIndex:e,loading:!0}),t.next=3,u["a"].remove({guid:n.guid});case 3:a=t.sent,a&&this.listRemove({multipleSelection:[n]}),this.$nextTick(function(){return i.setState({loading:!1})});case 6:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}(),handleSelectionChange:function(t){this.setState({multipleSelection:t})},filterStatus:function(t,e){return e.status===t}})},E=P,F=Object(y["a"])(E,$,j,!1,null,null,null),B=F.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination flex-row-center"},[n("el-dropdown",{attrs:{"split-button":"",type:"primary",icon:"el-icon-delete"},on:{click:t.handleClick,command:t.handleCommand}},[n("i",{staticClass:"el-icon-delete"}),t._v(" 删除选中\n        "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"a"}},[t._v("转为退休")]),n("el-dropdown-item",{attrs:{command:"b"}},[t._v("转为创业")])],1)],1),n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:t.total,"current-page":t.p},on:{"update:currentPage":function(e){t.p=e},"update:current-page":function(e){t.p=e},"current-change":t.handleCurrentChange}})],1)},G=[],z=Object(l["a"])("complexTable"),L=z.mapState,X=z.mapMutations,I=z.mapGetters,M={data:function(){return{p:1}},computed:Object(r["a"])({},L(["total","components","multipleSelection"]),I(["queryPath","multipleSelectionGuid"]),{query:function(t){return t.$route.query}}),watch:{query:function(t){this.p=+t.p}},methods:Object(r["a"])({},X(["setState","listRemove","listUpdateStatus"]),{handleCurrentChange:function(t){this.setState({filters:{p:t}}),this.$router.push(this.queryPath)},handleClick:function(){var t=this;this.multipleSelectionGuid&&this.$confirm("确认要删除这些数据吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.batchRemove()}).catch(function(){})},batchRemove:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.next=3,u["a"].remove({guid:this.multipleSelectionGuid});case 3:e=t.sent,e&&this.listRemove({multipleSelection:this.multipleSelection}),this.$nextTick(function(){return n.setState({loading:!1})});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleCommand:function(t){var e=this,n={a:function(){e.changeStatus("退休")},b:function(){e.changeStatus("创业")}};this.multipleSelectionGuid&&this.$confirm("确认要批量修改这些数据吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n[t]()}).catch(function(){})},changeStatus:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var n,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.next=3,u["a"].updateStatus({status:e});case 3:n=t.sent,n&&this.listUpdateStatus({status:e}),this.components.table.clearSelection(),this.$nextTick(function(){return a.setState({loading:!1})});case 7:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()})},U=M,V=Object(y["a"])(U,D,G,!1,null,null,null),J=V.exports,N=Object(l["a"])("complexTable"),A=N.mapState,H=N.mapMutations,K={components:{XSearch:_,XTable:B,XPagination:J,XPreview:function(){return n.e("chunk-0c9a3d5e").then(n.bind(null,"8f1d"))},XEdit:function(){return n.e("chunk-2d0b8a70").then(n.bind(null,"3030"))}},computed:Object(r["a"])({},A(["loading"])),mounted:function(){},beforeRouteUpdate:function(t,e,n){this.setState({filters:t.query}),n()},methods:Object(r["a"])({},H(["setState","test"]))},Q=K,W=Object(y["a"])(Q,a,i,!1,null,null,null);e["default"]=W.exports},7497:function(t,e,n){t.exports={checkbox:"search_checkbox_exS8j"}}}]);