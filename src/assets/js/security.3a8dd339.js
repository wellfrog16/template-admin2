(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["security"],{"0c1d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",attrs:{inline:"",model:e.form.fields},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"请输入查询内容","prefix-icon":"el-icon-search",autocomplete:"on",maxlength:"20",clearable:""},on:{clear:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.form.fields.q,callback:function(t){e.$set(e.form.fields,"q",t)},expression:"form.fields.q"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)],1),e._t("default",[n("div")])],2)},r=[],i=n("ade3"),s=n("5530"),o=(n("96cf"),n("1da1")),l=n("a97b"),c={data:function(){return{form:{fields:{q:""}}}},computed:{overdue:function(){return!0},filters:function(){return{}},infiniteState:function(){return{}},lazy:function(){return!1}},watch:{overdue:function(e){e&&this.refresh()}},methods:{setState:function(){},search:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkParams();case 2:if(!t.sent){t.next=4;break}e.lazy?(e.infiniteState.reset(),e.setState({list:[]})):e.loadList({vm:e});case 4:case"end":return t.stop()}}),t)})))()},refresh:function(){this.loadList({vm:this})},checkParams:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validate();case 2:return n=t.sent,n&&e.setState({filters:Object(s["a"])({},e.form.fields,Object(i["a"])({},l["a"],1))}),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()},loadList:function(){}}},u=c,f=n("2877"),m=Object(f["a"])(u,a,r,!1,null,null,null);t["a"]=m.exports},2345:function(e,t,n){e.exports={header:"edit2_header_fIFSc"}},"2b2f":function(e,t,n){"use strict";var a=n("de84"),r=n.n(a);t["default"]=r.a},"409d":function(e,t,n){"use strict";var a=n("2345"),r=n.n(a);t["default"]=r.a},"8c65":function(e,t,n){"use strict";n.r(t);var a,r,i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container-complex-table main-wrapper"},[n("x-search",{staticClass:"search"}),n("x-table",{staticClass:"table"}),n("x-pagination",{staticClass:"pagination flex-row-center"}),n("x-edit")],1)},s=[],o=(n("d3b7"),n("5530")),l=n("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",attrs:{inline:"",model:e.form.fields,rules:e.form.rules},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"请输入查询内容","prefix-icon":"el-icon-search",autocomplete:"on",maxlength:"20",clearable:""},on:{clear:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.form.fields.q,callback:function(t){e.$set(e.form.fields,"q",t)},expression:"form.fields.q"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)],1),n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("新增")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.refresh}},[e._v("刷新")])],1)],1)},u=[],f=n("0c1d"),m=Object(l["a"])("security/account"),d=m.mapState,p=m.mapMutations,h=m.mapActions,v={mixins:[f["a"]],data:function(){return{form:{fields:{q:""},rules:{}}}},computed:Object(o["a"])({},d(["filters","overdue"])),mounted:function(){this.refresh()},methods:Object(o["a"])({},p(["setState"]),{},h(["loadList"]),{handleCreate:function(){this.setState({activeUid:0,editVisible:!0})}})},b=v,g=n("2877"),_=Object(g["a"])(b,c,u,!1,null,null,null),y=_.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{ref:"table",attrs:{height:"500",border:"",stripe:"",data:e.list}},[n("el-table-column",{attrs:{prop:"id",label:"ID",align:"right",width:"70"}}),n("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),n("el-table-column",{attrs:{prop:"roles",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.roles.join(", ")))]}}])}),n("el-table-column",{attrs:{prop:"roles",label:"测试隐藏页",width:"120"}},[n("router-link",{attrs:{to:"/security/test"}},[e._v("连接")])],1),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return e.showEdit(t.row)}}}),n("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return e.handleRemove(t.row)}}})]}}])})],1)},x=[],w=n("b57b"),O=Object(l["a"])("security/account"),j=O.mapState,S=O.mapMutations,$=O.mapActions,C={mixins:[w["a"]],computed:Object(o["a"])({},j(["list"])),mounted:function(){},methods:Object(o["a"])({},S(["setState"]),{},$(["remove"]))},E=C,R=Object(g["a"])(E,k,x,!1,null,null,null),P=R.exports,N=n("c3f7"),q=Object(l["a"])("security/account"),z=q.mapState,D=q.mapMutations,X={mixins:[N["a"]],computed:Object(o["a"])({},z(["total","filters"])),methods:Object(o["a"])({},D(["setState"]))},L=X,M=Object(g["a"])(L,a,r,!1,null,null,null),T=M.exports,A=Object(l["a"])("security/account"),B=A.mapState,I={components:{XSearch:y,XTable:P,XPagination:T,XEdit:function(){return n.e("chunk-3a5e90cb").then(n.bind(null,"511b"))}},computed:Object(o["a"])({},B(["loading"]))},J=I,K=Object(g["a"])(J,i,s,!1,null,null,null);t["default"]=K.exports},b57b:function(e,t,n){"use strict";var a,r,i=n("a97b"),s={methods:{setState:function(){},showEdit:function(e){this.setState({activeUid:e[i["g"]],editVisible:!0})},handleRemove:function(e){var t=this;this.$confirm("确认要删除这条数据吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.remove({vm:t,row:e})})).catch((function(){}))},remove:function(){}}},o=s,l=n("2877"),c=Object(l["a"])(o,a,r,!1,null,null,null);t["a"]=c.exports},b7cb:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-wrapper"},[n("x-edit")],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"never"}},[n("div",{class:e.$style.header,attrs:{slot:"header"},slot:"header"},[n("span",[e._v("编辑角色")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handSave}},[e._v("保存权限")])],1),n("el-form",{attrs:{rules:e.form.rules},model:{value:e.form.fields,callback:function(t){e.$set(e.form,"fields",t)},expression:"form.fields"}},[n("el-form-item",{attrs:{label:"角色名称"}},[n("el-input",{model:{value:e.form.fields.name,callback:function(t){e.$set(e.form.fields,"name",t)},expression:"form.fields.name"}})],1),n("el-form-item",{attrs:{label:"权限分配"}},[n("el-col",{attrs:{span:24}},[n("el-tree",{ref:"tree",attrs:{data:e.routes,"show-checkbox":"","node-key":"path","default-expand-all":""}})],1)],1)],1)],1)},s=[],o=n("e350"),l=n("7ec3"),c=new o["a"](l["a"]),u={data:function(){return{routes:c.treeData(),form:{fields:{name:"",permissions:[]},rules:{}}}},mounted:function(){this.init()},methods:{init:function(){this.getRoutes()},getRoutes:function(){var e=["/icon/element-ui","/ui/table/complex"];this.$refs.tree.setCheckedKeys(e,!0)},handSave:function(){this.$refs.tree.getCheckedKeys(!0);var e={message:"请在dev模式下查看console.log信息",type:"info"};this.$store.commit("setState",{message:e})}}},f=u,m=n("409d"),d=n("2877");function p(e){this["$style"]=m["default"].locals||m["default"]}var h=Object(d["a"])(f,i,s,!1,p,null,null),v=h.exports,b={components:{XEdit:v}},g=b,_=Object(d["a"])(g,a,r,!1,null,null,null);t["default"]=_.exports},c3f7:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._t("default",[n("span")]),n("el-pagination",{attrs:{background:e.background,layout:e.layout,total:e.total,"page-size":e.ps,"current-page":e.p},on:{"update:currentPage":function(t){e.p=t},"update:current-page":function(t){e.p=t},"current-change":e.handleCurrentChange}})],2)},r=[],i=n("ade3"),s=n("a97b"),o=n("f121"),l={data:function(){return{ps:o["a"].page[s["b"]],background:!0,layout:"total, prev, pager, next"}},computed:{total:function(){return!0},filters:function(){return!0},p:{get:function(){return this.filters[s["a"]]},set:function(e){this.setState({filters:Object(i["a"])({},s["a"],e)})}}},methods:{setState:function(){},handleCurrentChange:function(){this.setState({overdue:!0})}}},c=l,u=n("2877"),f=Object(u["a"])(c,a,r,!1,null,null,null);t["a"]=f.exports},de84:function(e,t,n){e.exports={main:"Directive_main_3DR1u"}},e6dc:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"never"}},[e._v(" 测试隐藏页 ")])},r=[],i={},s=i,o=n("2877"),l=Object(o["a"])(s,a,r,!1,null,null,null);t["default"]=l.exports},f16c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.main,"main-wrapper"]},[n("el-card",{attrs:{shadow:"never"}},[n("el-form",{key:e.key,attrs:{"label-width":"170px","label-position":"left"}},[n("el-form-item",{attrs:{label:"临时修改当前用户角色"}},[n("switch-roles",{on:{change:e.handleRolesChange}})],1),n("el-divider",[n("i",{staticClass:"fas fa-users fa-lg"})]),n("el-form-item",{directives:[{name:"permission",rawName:"v-permission",value:["admin"],expression:"['admin']"}],attrs:{label:"仅admin可见"}},[n("el-tag",[e._v("admin")]),n("el-tag",{attrs:{type:"info"}},[e._v("v-permission=\"['admin']\"")])],1),n("el-form-item",{directives:[{name:"permission",rawName:"v-permission",value:["editor"],expression:"['editor']"}],attrs:{label:"仅editor可见"}},[n("el-tag",[e._v("editor")]),n("el-tag",{attrs:{type:"info"}},[e._v("v-permission=\"['editor']\"")])],1),n("el-form-item",{directives:[{name:"permission",rawName:"v-permission",value:["guest"],expression:"['guest']"}],attrs:{label:"仅guest可见"}},[n("el-tag",[e._v("guest")]),n("el-tag",{attrs:{type:"info"}},[e._v("v-permission=\"['guest']\"")])],1),n("el-form-item",{directives:[{name:"permission",rawName:"v-permission",value:["admin","editor"],expression:"['admin', 'editor']"}],attrs:{label:"admin和editor可见"}},[n("el-tag",[e._v("admin")]),n("el-tag",[e._v("editor")]),n("el-tag",{attrs:{type:"info"}},[e._v("v-permission=\"['admin', 'editor']\"")])],1)],1)],1),n("el-card",{attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[e._v("v-if例子")]),n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.checkPermission(["admin"])?n("el-tab-pane",{attrs:{label:"仅admin可见",name:"first"}},[n("el-tag",{attrs:{type:"info"}},[e._v("v-if=\"checkPermission(['admin'])\"")])],1):e._e(),e.checkPermission(["editor"])?n("el-tab-pane",{attrs:{label:"仅editor可见",name:"second"}},[n("el-tag",{attrs:{type:"info"}},[e._v("v-if=\"checkPermission(['editor'])\"")])],1):e._e(),e.checkPermission(["guest"])?n("el-tab-pane",{attrs:{label:"仅guest可见",name:"third"}},[n("el-tag",{attrs:{type:"info"}},[e._v("v-if=\"checkPermission(['guest'])\"")])],1):e._e(),e.checkPermission(["admin","editor"])?n("el-tab-pane",{attrs:{label:"admin和editor可见",name:"fourth"}},[n("el-tag",{attrs:{type:"info"}},[e._v("v-if=\"checkPermission(['admin', 'editor'])\"")])],1):e._e()],1)],1)],1)},r=[],i=n("308c"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-checkbox-group",{model:{value:e.switchRoles,callback:function(t){e.switchRoles=t},expression:"switchRoles"}},e._l(e.options,(function(t){return n("el-checkbox-button",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)},o=[],l={data:function(){return{options:["admin","editor","guest"]}},computed:{roles:function(){return this.$store.getters.roles},switchRoles:{get:function(){return this.roles},set:function(e){this.$store.commit("security/account/setState",{roles:e}),this.$emit("change")}}}},c=l,u=n("2877"),f=Object(u["a"])(c,s,o,!1,null,null,null),m=f.exports,d={components:{SwitchRoles:m},data:function(){return{activeName:"first",key:1}},methods:{checkPermission:function(e){return i["a"].checkPermission(this.$store.getters.roles,e)},handleRolesChange:function(){this.key+=1}}},p=d,h=n("2b2f");function v(e){this["$style"]=h["default"].locals||h["default"]}var b=Object(u["a"])(p,a,r,!1,v,null,null);t["default"]=b.exports}}]);