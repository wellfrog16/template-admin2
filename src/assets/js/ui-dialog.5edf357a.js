(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ui-dialog"],{"0a4d":function(e,t,i){"use strict";var a=i("0c1a"),n=i.n(a);t["default"]=n.a},"0c1a":function(e,t,i){e.exports={card:"col_card_19XSM",header:"col_header_1uZB7"}},"0e58":function(e,t,i){"use strict";var a=i("7f40"),n=i.n(a);t["default"]=n.a},2008:function(e,t,i){e.exports={windows:"index_windows_FcOWq",alert:"index_alert_h1205",placeholder:"index_placeholder_19veO",upload:"index_upload_31RhV","placeholder-opacity":"index_placeholder-opacity_20r8y","button-select":"index_button-select_2VNnM"}},"386d":function(e,t,i){"use strict";var a=i("cb7c"),n=i("83a1"),o=i("5f1b");i("214f")("search",1,function(e,t,i,s){return[function(i){var a=e(this),n=void 0==i?void 0:i[t];return void 0!==n?n.call(i,a):new RegExp(i)[t](String(a))},function(e){var t=s(i,e,this);if(t.done)return t.value;var r=a(e),l=String(this),c=r.lastIndex;n(c,0)||(r.lastIndex=0);var d=o(r,l);return n(r.lastIndex,c)||(r.lastIndex=c),null===d?-1:d.index}]})},"52bf":function(e,t,i){"use strict";var a=i("b5e9"),n=i.n(a);t["default"]=n.a},"68a5":function(e,t,i){e.exports={uploader:"index_uploader_3lJ91",icon:"index_icon_3oaha",photo:"index_photo_1esi7"}},"6e2b":function(e,t,i){"use strict";var a=i("b61f"),n=i.n(a);t["default"]=n.a},7506:function(e,t,i){e.exports={main:"index_main_1Efcq"}},7776:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],class:e.$style.uploader,attrs:{action:"","show-file-list":!1,accept:e.accept,"http-request":e.handleHttpRequest,"before-upload":e.handleBeforeUpload}},[e.hasImage?i("el-image",{class:e.$style.photo,style:e.imageSizeStyle,attrs:{src:e.imageSrc,fit:"contain"}},[i("div",{attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("加载中... ")])]):i("i",{class:[e.$style.icon,"el-icon-plus"],style:e.iconSizeStyle})],1)},n=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),s=i("d13c");function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(i,!0).forEach(function(t){Object(o["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var c={props:l({},s["a"]),data:function(){return{loading:!1}},computed:{hasImage:function(){return!!this.imageSrc},imageSizeStyle:function(){return{width:this.width,height:this.height,"line-height":this.height}},iconSizeStyle:function(){return{width:this.width,height:this.height,"line-height":this.height,"font-size":"".concat(this.iconSize,"px")}}},methods:{handleBeforeUpload:function(e){if(e.size>this.maxSize){var t={title:"错误",message:"图片大小不能超过".concat(this.maxSize/1024/1024,"M"),type:"error"};return this.$store.commit("setState",{notification:t}),!1}return this.beforeUpload?!!this.beforeUpload(e)&&(this.loading=!0,!0):(this.loading=!0,!0)},handleHttpRequest:function(e){var t=this,i=e.file;this.httpRequest(i,function(){t.loading=!1})}}},d=c,u=i("ed05"),h=i("2877");function p(e){this["$style"]=u["default"].locals||u["default"]}var f=Object(h["a"])(d,a,n,!1,p,null,null);t["a"]=f.exports},"7dba":function(e,t,i){"use strict";var a=i("2008"),n=i.n(a);t["default"]=n.a},"7f40":function(e,t,i){e.exports={main:"index_main_2gswx",container:"index_container_23lPQ",search:"index_search_GKqnI"}},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},8760:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main-wrapper"},[i("el-row",{class:e.$style.row,attrs:{gutter:20}},[i("x-camera-upload"),i("x-map-point"),i("x-cropper")],1)],1)},n=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("x-col",{attrs:{title:"拍照上传",icon:"fas fa-camera fa-fw"}},[i("el-alert",{attrs:{title:"用于拍照上传或者上传图片",type:"info",closable:!1}}),i("el-divider",[i("i",{staticClass:"fas fa-camera fa-fw"})]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleOpen}},[e._v("人像上传")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleOpen2}},[e._v("人像上传")]),i("camera-upload",{attrs:{visible:e.cameraUploadVisible,onSubmit:e.handleSubmit,upload:!1,"http-request":e.httpRequest},on:{"update:visible":function(t){e.cameraUploadVisible=t}}}),i("camera-upload",{attrs:{visible:e.cameraUploadVisible2,onSubmit:e.handleSubmit2,upload:!1,"http-request":e.httpRequest},on:{"update:visible":function(t){e.cameraUploadVisible2=t}}})],1)},s=[],r=i("fe27"),l=i("f121"),c=i("a97b"),d=Object(r["a"])({baseURL:l["a"].server.upload,notification:!1}),u=function(e){var t=e;e instanceof FormData||(t=new FormData,t.append(c["g"],e));var i=window.vueIndex.$helper.site(),a=Object.assign({"Content-Type":"multipart/form-data"},i.headers),n={headers:a};return d.post("",t,n).then(function(e){return e})},h=u,p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-col",{attrs:{span:12}},[i("el-card",{class:e.$style.card,attrs:{shadow:"hover"}},[i("div",{class:e.$style.header,attrs:{slot:"header"},slot:"header"},[i("i",{class:e.icon}),i("span",[e._v(e._s(e.title))])]),e._t("default")],2)],1)},f=[],v={props:{icon:String,title:String}},b=v,g=i("0a4d"),m=i("2877");function w(e){this["$style"]=g["default"].locals||g["default"]}var y=Object(m["a"])(b,p,f,!1,w,null,null),x=y.exports,S=function(){var e,t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("el-dialog",{staticClass:"or-dialog-wrapper",attrs:{title:t.title,visible:t.visible,"before-close":t.handleClose,"close-on-click-modal":!1,"append-to-body":!0,"custom-class":"or-dialog",width:t.dialogWidth,top:"0"},on:{"update:visible":function(e){t.visible=e}}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"windows",class:t.$style.windows,style:t.windowStyle},[a("el-image",{directives:[{name:"show",rawName:"v-show",value:t.imageVisible,expression:"imageVisible"}],attrs:{src:t.fixedImageUrl,fit:"contain"}}),a("video",{directives:[{name:"show",rawName:"v-show",value:t.videoVisible,expression:"videoVisible"}],attrs:{width:t.width,height:t.height}}),a("canvas",{directives:[{name:"show",rawName:"v-show",value:t.canvasVisible,expression:"canvasVisible"}],attrs:{width:t.width,height:t.height}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.alertVisible,expression:"alertVisible"}],class:t.$style.alert},[a("transition",{attrs:{name:"el-fade-in-linear"}},[a("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.alertSuccessVisible,expression:"alertSuccessVisible"}],attrs:{title:"提示",type:"success",center:"","show-icon":"",closable:!1,description:t.description}})],1),a("transition",{attrs:{name:"el-fade-in-linear"}},[a("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.alertErrorVisible,expression:"alertErrorVisible"}],attrs:{title:"提示",type:"error",center:"","show-icon":"",closable:!1,description:t.description}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.placeholderVisible,expression:"placeholderVisible"}],class:[(e={},e[t.$style["placeholder-opacity"]]=t.placeholderOpacity,e),t.$style.placeholder]},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"show",rawName:"v-show",value:t.cameraVisible,expression:"cameraVisible"}],staticClass:"flex-center",attrs:{disabled:t.loading},on:{click:t.handleOpenCamera}},[a("i",{staticClass:"fas fa-camera fa-5x"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.uploadVisible,expression:"uploadVisible"}],staticClass:"flex-center"},[a("el-upload",{ref:"upload",staticClass:"fullsize",class:t.$style.upload,attrs:{action:"",accept:".jpg,.png,.jpeg","on-change":t.handleUploadChange,"on-success":t.handleUploadSuccess,"on-error":t.handleUploadError,"file-list":t.fileList,"show-file-list":!1,"auto-upload":!1,"http-request":t.customUpload}},[a("div",{staticClass:"flex-center abs-fullsize",attrs:{slot:"trigger"},slot:"trigger"},[a("i",{staticClass:"fas fa-upload fa-5x"})])])],1)])],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.cancelVisible,expression:"cancelVisible"}],attrs:{loading:t.loading,disabled:t.loading},on:{click:t.handleClose}},[t._v("取消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.saveVisible,expression:"saveVisible"}],attrs:{loading:t.loading,disabled:t.loading,type:"primary"},on:{click:t.handleSave}},[t._v(t._s(t.submitText))]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.backVisible,expression:"backVisible"}],attrs:{loading:t.loading,disabled:t.loading},on:{click:t.handleBack}},[t._v("返回")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.videoVisible,expression:"videoVisible"}],attrs:{loading:t.loading,disabled:t.loading,type:"primary"},on:{click:t.handleShoot}},[t._v("拍摄")])],1)],1)],1)},_=[],O=i("768b"),k=(i("6762"),i("2fdb"),i("c5f6"),i("d225")),C=i("b0b4");i("7f7f");function V(e,t){var i=e.video;i&&(i.srcObject=t,i.play(),e.successCallback&&e.successCallback(i))}function U(e,t){throw e.successCallback&&e.successCallback(t),new Error("访问用户媒体设备失败".concat(t.name,", ").concat(t.message))}var $=function(){function e(t,i){Object(k["a"])(this,e);var a=Object.assign({width:480,height:320,successCallback:function(){},errorCallback:function(){}},i);this.video=t,this.constraints={video:{width:a.width,height:a.height}},this.canvas=a.canvas,this.successCallback=a.successCallback,this.errorCallback=a.errorCallback}return Object(C["a"])(e,[{key:"getUserMedia",value:function(e,t){var i=this.constraints;navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(i).then(e).catch(t):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(i,e,t):navigator.mozGetUserMedia?navigator.mozGetUserMedia(i,e,t):navigator.getUserMedia&&navigator.getUserMedia(i,e,t)}},{key:"start",value:function(){var e=this;if(!this.constructor.isSupport())throw new Error("不支持访问用户媒体");this.getUserMedia(function(t){V(e,t)},function(t){U(e,t)})}},{key:"stop",value:function(){var e=this.video;e.pause(),e.srcObject&&(e.srcObject.getVideoTracks()[0].stop(),e.srcObject=null)}},{key:"shoot",value:function(){var e=this.canvas,t=this.video,i=this.constraints,a=i.video,n=a.width,o=a.height,s=e.getContext("2d");s.drawImage(t,0,0,n,o)}}],[{key:"isSupport",value:function(){return!!(navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia)}}]),e}(),j=$,W="upload",E="camera",N="image",q="video",M="canvas",D="placeholder",P="照片拍摄成功",I="打开摄像头失败",R={props:{name:{type:String,default:"avatar"},visible:{type:Boolean,default:!1},title:{type:String,default:"拍照上传"},type:{type:Array,default:function(){return[W,E]}},width:{type:Number,default:480},height:{type:Number,default:320},upload:{type:Boolean,default:!0},onSuccess:{type:Function},onError:{type:Function},onSubmit:{type:Function},submitText:{type:String,default:"保存"},src:{type:String},httpRequest:{type:Function},beforeUpload:{type:Function,default:function(){return!0}}},data:function(){return{loading:!1,currentWindow:"",lastWindow:D,imageUrl:"",currentFile:null,fileList:[],camera:null,isShooted:!1,alertVisible:!1,alertSuccessVisible:!1,alertErrorVisible:!1,canvas:null,description:""}},computed:{dialogWidth:function(){var e=40,t=2;return"".concat(this.width+e+t,"px")},windowStyle:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}},cameraVisible:function(){return this.type.includes(E)},uploadVisible:function(){return this.type.includes(W)},imageVisible:function(){return this.currentWindow===N},videoVisible:function(){return this.currentWindow===q},canvasVisible:function(){return this.currentWindow===M},placeholderOpacity:function(){return this.currentWindow===D},placeholderVisible:function(){return this.currentWindow===D||this.imageVisible||this.canvasVisible},backVisible:function(){return this.videoVisible},saveVisible:function(){var e=this.isImageSelected||this.isShooted,t=[M,N].includes(this.currentWindow);return e&&t},cancelVisible:function(){return!this.videoVisible},fixedImageUrl:function(){return this.imageUrl||this.src||""},isImageSelected:function(){return""!==this.imageUrl},uploadDisabled:function(){return this.loading||this.currentWindow===q}},watch:{visible:function(e){e&&this.initWindow()}},methods:{initWindow:function(){this.currentWindow="",this.isShooted=!1,this.imageUrl="",this.fileList=[],this.lastWindow=D,this.toggleWindow(D),this.src&&(this.lastWindow=N,this.toggleWindow(N))},handleClose:function(){this.loading||(this.closeCamera(),this.$emit("update:visible",!1))},handleSave:function(){var e=this;this.isImageSelected&&this.lastWindow===N&&(this.upload&&this.uploadImage(),this.upload||(this.loading=!0,this.onSubmit(this.currentFile,function(){e.loading=!1}))),this.isShooted&&this.lastWindow===M&&(this.upload&&this.canvas.toBlob(function(t){return e.uploadShoot(t)}),this.upload||(this.loading=!0,this.canvas.toBlob(function(t){return e.onSubmit(t,function(){e.loading=!1})})))},handleOpenCamera:function(){var e=this;if(!this.videoVisible){if(this.loading=!0,this.toggleWindow(q),!this.camera){var t=this.$refs.windows.$el,i=t.querySelector("video"),a=t.querySelector("canvas");this.canvas=a;var n={canvas:a,width:this.width,height:this.height,successCallback:function(){e.loading=!1}};this.camera=new j(i,n)}try{this.camera.start()}catch(o){this.description=I,this.showAlert("Error")}}},closeCamera:function(){this.camera&&this.camera.stop()},handleShoot:function(){this.camera.shoot(),this.closeCamera(),this.isShooted=!0,this.toggleWindow(M),this.lastWindow=M,this.description=P,this.showAlert("Success")},handleBack:function(){this.closeCamera(),this.showLastWindow(),this.currentWindow===q&&this.closeCamera()},submitUpload:function(){this.$refs.upload.submit()},showLastWindow:function(){this.toggleWindow(this.lastWindow)},toggleWindow:function(e){this.currentWindow=e},handleUploadChange:function(e,t){this.toggleWindow(N),this.lastWindow=N,e.response||this.preview(e,t)},preview:function(e,t){var i=this;t.length>1&&t.splice(0,1);var a=window,n=a.event,o=Object(O["a"])(n.target.files,1);this.currentFile=o[0];var s=new FileReader;s.onload=function(e){i.imageUrl=e.target.result},s.readAsDataURL(this.currentFile)},showAlert:function(e){var t=this;this.alertVisible=!0,this["alert".concat(e,"Visible")]=!0,setTimeout(function(){t["alert".concat(e,"Visible")]=!1},1500)},uploadImage:function(){this.$refs.upload.submit()},uploadShoot:function(e){this.myUpload(e)},customUpload:function(e){this.myUpload(e.file)},myUpload:function(e){var t=this,i=this.beforeUpload(e);!0===i&&(this.loading=!0,this.httpRequest(e).then(function(i){return t.handleUploadSuccess(i,e)}).catch(function(i){return t.handleUploadError(i,e)}))},handleUploadSuccess:function(e,t){this.loading=!1,this.onSuccess&&this.onSuccess(e,t),this.handleClose()},handleUploadError:function(e,t){this.loading=!1,this.onError&&this.onError(e,t)}}},F=R,z=i("7dba");function H(e){this["$style"]=z["default"].locals||z["default"]}var L=Object(m["a"])(F,S,_,!1,H,null,null),B=L.exports,T={components:{XCol:x,CameraUpload:B},data:function(){return{httpRequest:h,cameraUploadVisible:!1,cameraUploadVisible2:!1}},methods:{handleOpen:function(){this.cameraUploadVisible=!0},handleSubmit:function(e,t){var i=new FormData;h(i).then(function(){return t()}).catch(function(){return t()})},handleOpen2:function(){this.cameraUploadVisible2=!0},handleSubmit2:function(e,t){var i=new FormData;h(i).then(function(){return t()}).catch(function(){return t()})}}},X=T,G=Object(m["a"])(X,o,s,!1,null,null,null),A=G.exports,Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("x-col",{attrs:{title:"地图选点",icon:"el-icon-location"}},[i("el-alert",{attrs:{title:"百度地图选点返回坐标",type:"info",closable:!1}}),i("el-divider",[i("i",{staticClass:"el-icon-location"})]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleOpen}},[e._v("选择地点")]),i("map-point",{attrs:{visible:e.visible},on:{"update:visible":function(t){e.visible=t}},model:{value:e.myPoint,callback:function(t){e.myPoint=t},expression:"myPoint"}}),i("p",{class:e.$style.location},[i("el-alert",{attrs:{type:"info",closable:!1}},[e._v("\n            经度："+e._s(e.myPoint.lng||"-")+"\n            "),i("br"),e._v("维度："+e._s(e.myPoint.lat||"-")+"\n        ")])],1)],1)},Z=[],J=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{class:[e.$style.main,"or-dialog-wrapper"],attrs:{title:"选择地点",visible:e.visible,width:e.dialogWidth,"custom-class":"or-dialog","append-to-body":"","close-on-click-modal":!1,"before-close":e.handleBeforeClose,top:"0"},on:{"update:visible":function(t){e.visible=t}}},[i("div",{class:e.$style.container,style:e.containerStyle}),i("div",{class:e.$style.search},[i("el-input",{attrs:{placeholder:"请输入查询地址",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearch},slot:"append"})],1)],1),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)])},K=[],Y=(i("386d"),i("2c38")),ee={props:{value:{type:Object,default:function(){return{lng:null,lat:null}}},city:{type:String,default:"上海"},visible:{type:Boolean,default:!1}},data:function(){return{point:"",key:"",local:null,map:null}},computed:{dialogWidth:function(){var e=parseInt(.8*document.body.clientWidth,0),t=1e3;return"".concat(e>t?t:e,"px")},containerStyle:function(){var e=parseInt(.8*document.body.clientHeight,0),t=600;return e="".concat(e>t?t:e,"px"),{height:e}}},watch:{visible:function(e){var t=this;e&&this.$nextTick(function(){return t.init()}),!e&&this.destroy()}},methods:{init:function(){var e=this;this.map=new Y["b"].Map(document.querySelector(".".concat(this.$style.container)),{enableMapClick:!1});var t=this.map,i=null;if(null!==this.value.lng){var a=new Y["b"].Point(this.value.lng,this.value.lat);i=new Y["b"].Marker(a),t.addOverlay(i),t.centerAndZoom(a,14)}else t.centerAndZoom(this.city,14);t.enableScrollWheelZoom(),t.addControl(new Y["b"].NavigationControl),setTimeout(function(){t.addControl(new Y["b"].ScaleControl)},1e3),this.local=new Y["b"].LocalSearch(t,{renderOptions:{map:t}});var n=new Y["b"].Geocoder;t.addEventListener("click",function(a){e.point=a.point,n.getLocation(e.point,function(){i&&t.removeOverlay(i),i=new Y["b"].Marker(e.point),t.addOverlay(i)})})},destroy:function(){this.map=null},handleSearch:function(){this.local.search(this.key)},handleClose:function(){this.$emit("update:visible",!1),this.$emit("on-close")},handleBeforeClose:function(){this.handleClose()},handleSubmit:function(){this.$emit("input",this.point),this.handleClose()}}},te=ee,ie=i("0e58");function ae(e){this["$style"]=ie["default"].locals||ie["default"]}var ne=Object(m["a"])(te,J,K,!1,ae,null,null),oe=ne.exports,se={components:{XCol:x,MapPoint:oe},data:function(){return{myPoint:{lng:null,lat:null},visible:!1}},methods:{handleOpen:function(){this.visible=!0}}},re=se,le=i("52bf");function ce(e){this["$style"]=le["default"].locals||le["default"]}var de=Object(m["a"])(re,Q,Z,!1,ce,null,null),ue=de.exports,he=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("x-col",{attrs:{title:"图片裁剪",icon:"fas fa-crop fa-fw"}},[i("el-alert",{attrs:{title:"用于图片上传前裁剪图片",type:"info",closable:!1}}),i("el-divider",[i("i",{staticClass:"fas fa-crop fa-fw"})]),i("x-cropper",{attrs:{"http-request":e.httpRequest,"icon-size":30,"image-src":e.imageSrc,width:"200px",height:"100px",cropperWidth:400,cropperHeight:200}})],1)},pe=[],fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.$style.main},[i("x-upload-image",{attrs:{accept:e.accept,"icon-size":e.iconSize,"image-src":e.imageSrc,"max-size":e.maxSize,width:e.width,height:e.height,"http-request":e.handleHttpRequest,"before-upload":e.beforeUpload}}),i("x-cropper-core",{attrs:{visible:e.cropperVisible,image:e.image,"image-smoothing-quality":e.imageSmoothingQuality,cropperWidth:e.cropperWidth||parseInt(e.width,0),cropperHeight:e.cropperHeight||parseInt(e.height,0)},on:{"update:visible":function(t){e.cropperVisible=t},"on-finished":e.handleFinished,"on-cancel":e.cancel}})],1)},ve=[],be=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),ge=i("d13c"),me=i("7776"),we=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"or-dialog-wrapper",attrs:{title:"图片裁剪",visible:e.visible,width:e.dialogWidth,"custom-class":"or-dialog","append-to-body":"","close-on-click-modal":!1,"before-close":e.handleBeforeClose,top:"0"},on:{"update:visible":function(t){e.visible=t}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],class:e.$style.container},[i("div",{ref:"workbench",class:e.$style.workbench,style:e.containerStyle})]),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{loading:e.loading},on:{click:e.handleCancle}},[e._v("取 消")]),i("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleFinish}},[e._v("确 定")])],1)])},ye=[],xe={props:{visible:{type:Boolean,default:!1},image:{type:HTMLImageElement,required:!0},imageSmoothingQuality:{type:String,default:"high"},containerWdith:{type:Number,default:600},containerHeight:{type:Number,default:450},cropperWidth:{type:Number,default:400},cropperHeight:{type:Number,default:300}},data:function(){return{cropper:null,loading:!1}},computed:{dialogWidth:function(){return"".concat(this.containerWdith+40,"px")},containerStyle:function(){return{width:"".concat(this.containerWdith,"px"),height:"".concat(this.containerHeight,"px")}}},watch:{visible:function(e){var t=this;e&&this.$nextTick(function(){return t.update()})}},methods:{update:function(){this.$refs.workbench.appendChild(this.image);var e=this;this.cropper=new Y["d"](this.image,{viewMode:1,aspectRatio:e.cropperWidth/e.cropperHeight,toggleDragModeOnDblclick:!1,guides:!0,minContainerHeight:parseInt(this.containerHeight,0),ready:function(){var e=this.cropper;e.setDragMode("move")}})},handleFinish:function(){var e=this;this.loading=!0,this.cropper.getCroppedCanvas({width:this.cropperWidth,height:this.cropperHeight,imageSmoothingQuality:this.imageSmoothingQuality}).toBlob(function(t){e.$emit("on-finished",t),e.loading=!1,e.close()})},handleCancle:function(){this.close(),this.$emit("on-cancel")},handleBeforeClose:function(){return!this.loading&&this.handleCancle()},close:function(){this.$emit("update:visible",!1),this.cropper.destroy(),this.$refs.workbench.innerHTML=""}}},Se=xe,_e=i("6e2b");function Oe(e){this["$style"]=_e["default"].locals||_e["default"]}var ke=Object(m["a"])(Se,we,ye,!1,Oe,null,null),Ce=ke.exports;function Ve(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function Ue(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ve(i,!0).forEach(function(t){Object(be["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ve(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var $e={components:{XUploadImage:me["a"],XCropperCore:Ce},props:Ue({},ge["a"],{imageSmoothingQuality:{type:String,default:"high"},cropperWidth:{type:Number},cropperHeight:{type:Number}}),data:function(){return{cropperVisible:!1,image:new Image,handleDone:null}},computed:{},methods:{handleHttpRequest:function(e,t){var i=new Image,a=window.URL.createObjectURL(e);i.src=a,this.image=i,this.cropperVisible=!0,this.handleDone=t},handleFinished:function(e){this.httpRequest(e,this.handleDone)},cancel:function(){this.handleDone()}}},je=$e,We=i("9292");function Ee(e){this["$style"]=We["default"].locals||We["default"]}var Ne=Object(m["a"])(je,fe,ve,!1,Ee,null,null),qe=Ne.exports,Me={components:{XCol:x,XCropper:qe},data:function(){return{imageSrc:""}},methods:{handleOpen:function(){this.visible=!0},httpRequest:function(e,t){this.imageSrc=window.URL.createObjectURL(e),t()}}},De=Me,Pe=i("c8c9");function Ie(e){this["$style"]=Pe["default"].locals||Pe["default"]}var Re=Object(m["a"])(De,he,pe,!1,Ie,null,null),Fe=Re.exports,ze={components:{XCameraUpload:A,XMapPoint:ue,XCropper:Fe}},He=ze,Le=i("d1ff");function Be(e){this["$style"]=Le["default"].locals||Le["default"]}var Te=Object(m["a"])(He,a,n,!1,Be,null,null);t["default"]=Te.exports},"8a47":function(e,t,i){e.exports={location:"index_location_34ADd"}},9292:function(e,t,i){"use strict";var a=i("7506"),n=i.n(a);t["default"]=n.a},aa31:function(e,t,i){e.exports={row:"Dialog_row_2u_qy"}},b5e9:function(e,t,i){e.exports={location:"index_location_1NGVL"}},b61f:function(e,t,i){e.exports={container:"core_container_1jSF4",workbench:"core_workbench_1iOdR"}},c8c9:function(e,t,i){"use strict";var a=i("8a47"),n=i.n(a);t["default"]=n.a},d13c:function(e,t,i){"use strict";i("c5f6");t["a"]={accept:{type:String,default:".jpg,.jpeg,.png"},imageSrc:{type:String,default:""},maxSize:{type:Number,default:2097152},width:{type:String,default:"200px"},height:{type:String,default:"200px"},iconSize:{type:Number,default:28},httpRequest:{type:Function},beforeUpload:{type:Function}}},d1ff:function(e,t,i){"use strict";var a=i("aa31"),n=i.n(a);t["default"]=n.a},ed05:function(e,t,i){"use strict";var a=i("68a5"),n=i.n(a);t["default"]=n.a}}]);